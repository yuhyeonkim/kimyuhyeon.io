<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>계산기</title>
</head>
<body>
	<script type="text/javascript">
	var flag = true;  // 처음입력인지 아닌지 구별하는 flag
	var totalFlag = true;  // =기호가 입력됐는지 구별하는 flag
	var flag2 = 0;
	 
	function err(){  
	    var f = document.calculator ; 
	    f.answer.value="수식오류";
	    flag = true;
	    }
	 
	function but(number){ 
	 
		// 계산 후 또 숫자가 올 경우 초기화, 문자면 진행
	    if (totalFlag == false && isNaN(number)==false)
	    {
	        c(); // c버튼 눌렀을 때 값을 0으로
	    }else{
	        totalFlag = true;
	        }
	    
	    var f = document.calculator ;
	 
	    if (flag)  // 초기에 들어있는 0을 없앰
	    {    
	        if (number == 0)
	        {
	            return;
	        }
	        f.answer.value="";
	        flag = false;  
	    }
	    
	    if (isNaN(number)) // 문자 2번 입력 방지 
	    {
	        flag2++;
	    }else{
	        flag2 = 0;
	        }
	        
	    if (flag2 >1)  // 문자 입력이 2번 이상이거나 처음에 문자입력하면 리턴
	    {
	        alert("숫자를 입력해주세요");
	        return;
	    }
	    f.answer.value += number;   
	}
	 
	 
	function c(){  
	    var f = document.calculator ;
	    flag = true;        
	    totalFlag = true;    
	    f.answer.value = "0";     
	    }
	 
	function total(){  
	 
	    var f = document.calculator ;
	 
	try 
	{
	    var a = eval(f.answer.value);
	    // eval은 텍스트로 된 자바스크립트 코드를 실행시킬 수 있는 함수
	    if (isNaN(a))     // 숫자가 아니면 '수식오류'글자 띄움           
	    {
	        throw err();   
	        return;
	    }
	}
	catch (exception)
	{
	     err(); 
	     return;
	}
	totalFlag = false; 
	var b = (parseInt(a));
	f.answer.value = b;     
	                
	    }
	 
	</script>
	
	<h2 align="center" style="font-size:30px; color:blue">계 산 기</h2>
    <form name="calculator">
        <table border="0" align="center" cellspacing="0" style="border:2px solid black; padding:10px;  ">
            <tr>
                <td colspan="5"><input type="text" name="answer" id="answer" value="0"></td>
            </tr>
            <tr>
                <td><input type="button" value="7" onclick="but(7)"></td>
                <td><input type="button" value="8" onclick="but(8)"></td>
                <td><input type="button" value="9" onclick="but(9)"></td>
                <td colspan="2"><input type="button" value="C" onclick="c()"></td>
            </tr>
            <tr>
                <td><input type="button" value="4" onclick="but(4)"></td>
                <td><input type="button" value="5" onclick="but(5)"></td>
                <td><input type="button" value="6" onclick="but(6)"></td>
                <td><input type="button" value="/" onclick="but('/')"></td>
                <td><input type="button" value="%" onclick="but('%')"></td>
            </tr>
            <tr>
                <td><input type="button" value="1" onclick="but(1)"></td>
                <td><input type="button" value="2" onclick="but(2)"></td>
                <td><input type="button" value="3" onclick="but(3)"></td>
                <td><input type="button" value="*" onclick="but('*')"></td>
                <td><input type="button" value="+" onclick="but('+')"></td>
            </tr>
            <tr>
                <td><input type="button" value="0" onclick="but(0)"></td>
                <td><input type="button" value="." onclick="but('.')"></td>
                <td colspan="2"><input type="button" value="=" onclick="total()"></td>
                <td><input type="button" value="-" onclick="but('-')"></td>
            </tr>
        </table>
    </form>


</body>
</html>